# The Universal Language of Disks: SCSI and the Linux Kernel

You might be wondering: *"My computer uses USB drives and SATA hard disks. Why are we talking about SCSI (Small Computer System Interface), a technology from the 1980s?"*

The answer is simple: **Standardization.**
While the physical cables have changed, the Linux Kernel still uses the **SCSI Language** to talk to almost all storage devices. Whether it is a USB stick, a SATA drive, or a DVD-ROM, Linux treats them as if they were SCSI devices.

---

## 1. The Addressing Scheme: `[H:C:T:L]`
In the Linux Kernel, every storage device has a specific numerical address, similar to an IP address for networking. This address is made of four numbers inside brackets, like `[2:0:0:0]`.

$$ \text{Address} = [ \underbrace{\texttt{Host}}_{Adapter} : \underbrace{\texttt{Channel}}_{Bus} : \underbrace{\texttt{Target}}_{ID} : \underbrace{\texttt{LUN}}_{Logic Unit} ] $$

1.  **Host (The Adapter):** This is the physical controller card (or chip) on your motherboard. If you have two USB controllers, you have Host 0 and Host 1.
2.  **Channel (The Bus):** Think of this as a cable coming out of the adapter.
3.  **Target (The Device ID):** The specific drive attached to that cable.
4.  **LUN (Logical Unit Number):** A sub-division inside the drive.
    *   *Real-world example:* Some USB card readers have slots for SD cards, MicroSD, and CompactFlash. The Reader is the **Target**, but the SD slot is **LUN 0** and the CF slot is **LUN 1**.

## 2. The Translation Layer
Your kernel creates a "Lie" to make life easier.
*   **Physical Reality:** You plug in a USB stick. It speaks the "USB Mass Storage" protocol.
*   **Kernel Reality:** Linux uses a translator (like `libata` for SATA or `usb-storage` for USB). It translates "SCSI Commands" into the specific electrical signals your device needs.

This is why your SATA hard drive appears as `/dev/sda` (**S**CSI **D**isk **A**), even though it isn't technically a legacy SCSI disk.

---

# üõ†Ô∏è Hands-On Lab: GitHub Codespaces

We will explore the SCSI subsystem. Because GitHub Codespaces runs inside a Container (Virtualization), the hardware we see is "Virtual," but the addressing logic remains the same.

### Step 1: Install `lsscsi`
The command `lsscsi` (List SCSI) is the standard tool for viewing this hierarchy. It is not installed by default in minimal environments.

```bash
sudo apt-get update && sudo apt-get install -y lsscsi
```

### Step 2: View the SCSI Devices
Run the command to see your storage devices arranged by their address.

```bash
lsscsi -s
```

**Observation:**
*   **If you see output:** It will look like this:
    ```text
    [0:0:0:0]    disk    Msft     Virtual Disk     1.0   /dev/sda   128GB
    [0:0:1:0]    cd/dvd  Msft     Virtual CD/ROM   1.0   /dev/sr0        -
    ```
    *   **`[0:0:0:0]`**: This is your main hard drive.
    *   **`disk`**: The type of device.
    *   **`/dev/sda`**: The device file name.

*   **If you see no output:** This is common in some Docker containers because they hide the "Physical" hardware from the container. In that case, we can verify the support differently in Step 3.

### Step 3: Check Sysfs (The Kernel's View)
Even if `lsscsi` is empty, we can look directly into the Kernel's directory to see if any SCSI "Hosts" (Virtual Controllers) exist.

```bash
ls /sys/class/scsi_host/
```

**Observation:**
You will likely see folders like `host0`, `host1`, etc.
*   These represent the virtual storage controllers assigned to your cloud instance.
*   Linux creates a `host` entry for every storage controller it detects during boot.

### Step 4: Compare with Block Devices
Let's cross-reference this with the block device list.

```bash
lsblk -S
```
*(The `-S` flag specifically asks for SCSI information).*

**Observation:**
This summarizes the Transport layer.
*   **HCTL:** This stands for Host:Channel:Target:LUN (the numbers we discussed).
*   **TYPE:** disk, rom, etc.
*   **VENDOR:** In a Codespace, this will likely say "Msft" (Microsoft) or "Virtual", proving that your "Hardware" is actually software emulating a SCSI disk!

### Step 5: Cleanup
We should remove the tool we installed to keep the environment clean.

```bash
sudo apt-get remove -y lsscsi
```